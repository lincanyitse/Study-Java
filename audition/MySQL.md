# MySQL 面试题

## 1.三大范式的理解

+ 第一范式
  > 每一列属性都是不可再分，确保每一列的原子性;两列的属性相近、相似或一样，尽量合并为一列，确保不产生冗余数据;
  >
  >总结：确保每列保持原子性;

+ 第二范式
  > 在一个数据库表中，一个表中只能保存一种数据，不可以把多种数据保存在同一张数据库表中;
  >
  >总结：确保表中的每列都与主键相关，而不是只有一部分与主键相关;

+ 第三范式
  > 数据不能存在传递关系，即没个属性都跟主键有直接关系而不是间接关系
  >
  >总结：确保每列都和主键列直接相关，而不是间接相关

+ 总结
  > 第一范式就是无重复的属性;第二范式就是非主属性非部分依赖于主关键字;第三范式就是属性不依赖于其它非主属性

## 2.索引的使用场景

+ 对于那些再查询中很少使用或者参考的列不应该创建索引
  > 这是因为，既然这些列很少使用到，因此有索引或者无索引，并不能提高查询速度;相反，由于增加了索引，反而降低了系统的维护速度和增大了空间需求

+ 对于那些只有很少数据值的列也不应该增加索引
  > 这是因为，由于这些列的取值很少，例如人事表的性别列，在查询的结果中，结果集的数据行占了表中数据行的很大比例，即需要在表中搜索的数据行的比例很大;增加索引，并不能明显加快检索速度

+ 对于那些定义为text, image和bit数据类型的列不应该增加索引
  > 这是因为，这些列的数据量要么相当大，要么取值很少

+ 当修改性能远远大于检索性能时，不应该创建索引
  > 这是因为，修改性能和检索性能是互相矛盾的;当增加索引时，会提高检索性能，但是会降低修改性能;当减少索引时，会提高修改性能，降低检索性能;因此，当修改性能远远大于检索性能时，不应该创建索引

## 3.数据库事务的四个特性及含义

1. 原子性(Atomicity)
   > 整个事务中的所有操作，要么全部完成，要么全部不完成，不可能停滞在中间某个环节;

2. 一致性(Comrrespondence)
   > 在事务开始之前和事务结束以后，数据库的完整性约束没有被破坏;

3. 隔离性(Isolation)
   > 隔离状态执行事务，使它们好像是系统在给定时间内执行的唯一操作;如果有两个事务，运行在相同的时间内，执行相同的功能，事务的隔离性将确保每一事务在系统中认为只有该事务在使用系统;这种属性有时称为串行化，为了防止事务操作间的混淆，必须串行化或序列化请求，使得在同一时间仅有一个请求用于同一数据

4. 持久性(Durability)
   > 在事务完成以后，该事务所对数据库所作的更改便持久的保存在数据库之中，并不会被回滚

## 4.数据库优化的思路

+ SQL 语句优化

  + 应尽量避免在 where 子句中使用 != 或 <> 操作符，否则将引擎放弃使用索引而进行全表扫描;
  
  + 应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描
  
  + 很多时候用 exists 代替 in 是一个好的选择
  
  + 用 Where 子句替换 HAVING 子句 因为 HAVING 只会在检索出所有记录之后才对结果集进行过滤
  
+ 索引的优化
  > [看上文索引](#2.索引的使用场景)

+ 数据库结构优化
  
  1. 范式优化
     > 消除冗余
  2. 反范式优化
     > 减少 join
  3. 进行表分区
     > 指根据一定规则，将数据库中的一张表分解成多个更小的，容易管理的部分;
  4. 选择合适的存储引擎
     + Myisam
       > 默认的mysql插件式存储引擎;如果应用是以读操作和插入操作为主，只有很少的更新和删除操作，并且对事务的完整性、并发性要求不是很高，那么选择这个存储引擎是非常合适的;Myisam是在web、数据仓储和其他应用环境下最常使用的存储引擎之一;

     + Innodb
       > 用于事务处理应用程序，支持外键;如果应用对事务的完整性有比较高的要求，在并条件下要求数据的一致性，数据操作除了插入和查询以外，还包括很多的更新、删除操作，那么Innodb存储引擎应该是比较合适的选择;Innodb存储引擎除了有效的降低由于删除和更新导致的锁定，还可以确保事务的完整性提交（commit）和回滚（rollback），对于类似计费统计或财务系统等岁数据准确性要求比较高的系统，Innodb都是合适的选择;

     + Memory
       > 将所有的数据保存在RAM中，在需要快速定位记录和其他类似数据的环境下，可提供极快的访问;Memory的缺陷是对表的大小的限制，太大的表无法Cache到内存中，其次是要确保表的数据可以恢复，数据库异常终止后表中的数据是可以恢复的，Memory表通常用于更新不太频繁的小表，用以快速得到访问结果;

     + Merge
       > 用于将一系列的 Myisam 表的逻辑方式组合在一起，并作为一个对象引用他们，Merge 表的优点在可以突破对单个 Myisam 表大小的限制，并且通过将不同的表分布在对个磁盘上，可以有效地改善 Merge 表的访问速度;这对于诸如数据仓储等 VLDB 环境十分适合

  5. 选择合适的数据类型
     > 优化存储

+ 服务器硬件优化
